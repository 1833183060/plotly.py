version: 2
static:
  options:
    waitForTimeout: 6000
    execute:
      beforeSnapshot: |
        const stash = window._canvasStash = [];
        Array.from(document.querySelectorAll('canvas')).forEach(c => {
            const i = document.createElement('img');
            i.src = c.toDataURL();
            i.width = c.width;
            i.height = c.height;
            i.setAttribute('style', c.getAttribute('style'));
            i.className = c.className;
            i.setAttribute('data-canvasnum', stash.length);
            stash.push(c);
            c.parentElement.insertBefore(i, c);
            c.parentElement.removeChild(c);
        });
        // just to know if we're running this code or not!
        var d = document.createElement('div');
        d.setAttribute('style', 'position:fixed;left:10px;top:10px;width:10px;height:10px;background-color:#f00;');
        document.body.appendChild(d);
snapshot:
  widths:
    - 1280
